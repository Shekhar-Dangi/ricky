<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <title>AI Companion Workspace</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
  </head>
  <body class="min-h-screen bg-black text-slate-200 antialiased selection:bg-cyan-500/30 selection:text-cyan-100" style="font-family: Inter, 'SF Pro Text', 'SF Pro Display', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji'">
    <!-- Dynamic gradient background layer -->
    <div id="bg" class="fixed inset-0 -z-50 transition-all duration-[2000ms]" style="background: radial-gradient(1200px 800px at 20% 10%, rgba(30,64,175,0.25), transparent 60%), radial-gradient(800px 600px at 80% 80%, rgba(16,185,129,0.18), transparent 60%), linear-gradient(180deg, #0b1020 0%, #090e1a 100%);"></div>

    <!-- Subtle star/particle layer -->
    <div class="pointer-events-none fixed inset-0 -z-40">
      <div class="absolute inset-0 [mask-image:radial-gradient(circle_at_center,black,transparent_75%)]">
        <div class="absolute top-10 left-20 w-1 h-1 rounded-full bg-cyan-400/40 blur-[1px] animate-pulse"></div>
        <div class="absolute top-1/3 right-24 w-1 h-1 rounded-full bg-fuchsia-400/40 blur-[1px] animate-pulse delay-200"></div>
        <div class="absolute bottom-32 left-1/4 w-1 h-1 rounded-full bg-emerald-400/40 blur-[1px] animate-pulse delay-500"></div>
        <div class="absolute top-1/2 left-1/3 w-1 h-1 rounded-full bg-sky-400/40 blur-[1px] animate-pulse delay-700"></div>
        <div class="absolute bottom-16 right-1/3 w-1 h-1 rounded-full bg-indigo-400/40 blur-[1px] animate-pulse delay-1000"></div>
      </div>
    </div>

    <!-- Cursor-following orbs -->
    <div id="orbA" class="pointer-events-none fixed -z-30 w-56 h-56 rounded-full bg-cyan-500/10 blur-3xl mix-blend-screen transition-transform duration-700 ease-out" style="transform: translate3d(60vw, 40vh, 0);"></div>
    <div id="orbB" class="pointer-events-none fixed -z-30 w-72 h-72 rounded-full bg-fuchsia-500/10 blur-3xl mix-blend-screen transition-transform duration-700 ease-out" style="transform: translate3d(40vw, 60vh, 0);"></div>

    <!-- Sidebar -->
    <aside class="group fixed z-30 left-4 top-4 bottom-4 w-[4.25rem] hover:w-64 transition-[width] duration-500 ease-out">
      <div class="h-full rounded-3xl bg-white/5 backdrop-blur-xl border border-white/10 shadow-[0_10px_40px_rgba(0,0,0,0.45)] flex flex-col overflow-hidden">
        <!-- Brand -->
        <div class="flex items-center gap-3 px-3 py-4">
          <div class="grid place-items-center w-10 h-10 rounded-2xl bg-gradient-to-br from-cyan-400/20 to-fuchsia-400/20 border border-white/10 shadow-inner">
            <span class="text-slate-100 font-semibold tracking-tight" style="letter-spacing: -0.02em;">A</span>
          </div>
          <div class="opacity-0 group-hover:opacity-100 transition-opacity duration-500">
            <div class="text-base tracking-tight text-slate-100" style="font-family: Poppins, Inter, ui-sans-serif;">Asona</div>
            <div class="text-xs text-slate-400 -mt-0.5">Your AI companion</div>
          </div>
        </div>
        <div class="mx-3 mb-2 h-px bg-white/10"></div>
        <!-- Nav -->
        <nav class="flex-1 px-2 space-y-1">
          <button data-module="chat" class="w-full flex items-center gap-3 rounded-2xl px-3 py-3 text-slate-300/90 hover:text-slate-100 hover:bg-white/7 border border-transparent hover:border-white/10 transition-all duration-300 active:scale-[0.98]">
            <i data-lucide="message-circle" class="shrink-0"></i>
            <span class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-sm tracking-tight">Chat</span>
          </button>
          <button data-module="knowledge" class="w-full flex items-center gap-3 rounded-2xl px-3 py-3 text-slate-300/90 hover:text-slate-100 hover:bg-white/7 border border-transparent hover:border-white/10 transition-all duration-300 active:scale-[0.98]">
            <i data-lucide="database" class="shrink-0"></i>
            <span class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-sm tracking-tight">Knowledge</span>
          </button>
          <button data-module="files" class="w-full flex items-center gap-3 rounded-2xl px-3 py-3 text-slate-300/90 hover:text-slate-100 hover:bg-white/7 border border-transparent hover:border-white/10 transition-all duration-300 active:scale-[0.98]">
            <i data-lucide="folder" class="shrink-0"></i>
            <span class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-sm tracking-tight">Files</span>
          </button>
          <button data-module="plugins" class="w-full flex items-center gap-3 rounded-2xl px-3 py-3 text-slate-300/90 hover:text-slate-100 hover:bg-white/7 border border-transparent hover:border-white/10 transition-all duration-300 active:scale-[0.98]">
            <i data-lucide="plug" class="shrink-0"></i>
            <span class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-sm tracking-tight">Plugins</span>
          </button>
          <button data-module="settings" class="w-full flex items-center gap-3 rounded-2xl px-3 py-3 text-slate-300/90 hover:text-slate-100 hover:bg-white/7 border border-transparent hover:border-white/10 transition-all duration-300 active:scale-[0.98]">
            <i data-lucide="settings" class="shrink-0"></i>
            <span class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-sm tracking-tight">Settings</span>
          </button>
        </nav>
        <div class="mx-3 my-2 h-px bg-white/10"></div>
        <div class="px-3 pb-3">
          <div class="flex items-center justify-between gap-3 rounded-2xl bg-white/5 border border-white/10 px-3 py-2">
            <div class="flex items-center gap-2">
              <div class="w-2.5 h-2.5 rounded-full bg-emerald-400/80 shadow-[0_0_16px_rgba(16,185,129,0.8)]"></div>
              <span class="text-xs text-slate-300 tracking-tight">Online</span>
            </div>
            <button id="themeBtn" class="rounded-xl px-3 py-1.5 text-xs text-slate-300 bg-white/5 hover:bg-white/10 border border-white/10 transition-all duration-300 active:scale-[0.98]">Calm</button>
          </div>
        </div>
      </div>
    </aside>

    <!-- Right floating card stack -->
    <div class="fixed z-20 right-4 top-4 bottom-4 pointer-events-none">
      <div class="relative h-full flex flex-col items-end gap-3">
        <!-- Saved Conversations -->
        <div class="pointer-events-auto rounded-3xl bg-white/5 backdrop-blur-xl border border-white/10 shadow-[0_20px_80px_rgba(0,0,0,0.45)] w-[19rem] max-w-[85vw] mt-16 p-4 translate-x-6 opacity-0 scale-[0.98] transition-all duration-700 ease-[cubic-bezier(0.175,0.885,0.32,1.275)]" data-spring-card>
          <div class="flex items-center justify-between">
            <h3 class="text-sm tracking-tight text-slate-100">Saved Conversations</h3>
            <button class="rounded-xl px-2 py-1 text-[11px] bg-white/5 text-slate-300 border border-white/10 hover:bg-white/10 transition">Open</button>
          </div>
          <div class="mt-3 space-y-2">
            <button class="w-full flex items-center justify-between rounded-2xl px-3 py-2 bg-white/5 hover:bg-white/10 border border-white/10 transition">
              <span class="text-[13px] text-slate-200 tracking-tight line-clamp-1">Agent Design Sprint</span>
              <i data-lucide="chevron-right" class="w-4 h-4 text-slate-400"></i>
            </button>
            <button class="w-full flex items-center justify-between rounded-2xl px-3 py-2 bg-white/5 hover:bg-white/10 border border-white/10 transition">
              <span class="text-[13px] text-slate-200 tracking-tight line-clamp-1">Pitch deck rehearsal</span>
              <i data-lucide="chevron-right" class="w-4 h-4 text-slate-400"></i>
            </button>
          </div>
        </div>
        <!-- File Embeddings -->
        <div class="pointer-events-auto rounded-3xl bg-white/5 backdrop-blur-xl border border-white/10 shadow-[0_20px_80px_rgba(0,0,0,0.45)] w-[19rem] max-w-[85vw] p-4 translate-x-6 opacity-0 scale-[0.98] transition-all duration-700 delay-150 ease-[cubic-bezier(0.175,0.885,0.32,1.275)]" data-spring-card>
          <div class="flex items-center justify-between">
            <h3 class="text-sm tracking-tight text-slate-100">File Embeddings</h3>
            <button class="rounded-xl px-2 py-1 text-[11px] bg-white/5 text-slate-300 border border-white/10 hover:bg-white/10 transition">Index</button>
          </div>
          <div class="mt-3 space-y-2">
            <div class="flex items-center justify-between rounded-2xl px-3 py-2 bg-white/5 border border-white/10">
              <div class="flex items-center gap-2">
                <div class="w-7 h-7 rounded-xl bg-gradient-to-br from-cyan-400/30 to-sky-500/20 border border-white/10"></div>
                <div>
                  <div class="text-[13px] tracking-tight text-slate-100">/docs/product</div>
                  <div class="text-[11px] text-slate-400">342 chunks</div>
                </div>
              </div>
              <button class="rounded-xl px-2 py-1 text-[11px] bg-white/5 text-slate-300 border border-white/10 hover:bg-white/10 transition">Update</button>
            </div>
          </div>
        </div>
        <!-- Quick Actions -->
        <div class="pointer-events-auto rounded-3xl bg-white/5 backdrop-blur-xl border border-white/10 shadow-[0_20px_80px_rgba(0,0,0,0.45)] w-[19rem] max-w-[85vw] p-4 translate-x-6 opacity-0 scale-[0.98] transition-all duration-700 delay-300 ease-[cubic-bezier(0.175,0.885,0.32,1.275)]" data-spring-card>
          <div class="flex items-center justify-between">
            <h3 class="text-sm tracking-tight text-slate-100">Quick Actions</h3>
          </div>
          <div class="mt-3 grid grid-cols-2 gap-2">
            <button class="group rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 p-3 text-left transition active:scale-[0.98]">
              <div class="flex items-center gap-2">
                <i data-lucide="folder-open" class="w-4 h-4 text-slate-300"></i>
                <span class="text-[12px] tracking-tight text-slate-200">Summarize folder</span>
              </div>
              <div class="mt-2 text-[11px] text-slate-400">Pick a path</div>
            </button>
            <button class="group rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 p-3 text-left transition active:scale-[0.98]">
              <div class="flex items-center gap-2">
                <i data-lucide="code-2" class="w-4 h-4 text-slate-300"></i>
                <span class="text-[12px] tracking-tight text-slate-200">Run code</span>
              </div>
              <div class="mt-2 text-[11px] text-slate-400">Sandboxed</div>
            </button>
            <button class="group rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 p-3 text-left transition active:scale-[0.98]">
              <div class="flex items-center gap-2">
                <i data-lucide="search" class="w-4 h-4 text-slate-300"></i>
                <span class="text-[12px] tracking-tight text-slate-200">Fetch info</span>
              </div>
              <div class="mt-2 text-[11px] text-slate-400">Trusted sources</div>
            </button>
            <button class="group rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 p-3 text-left transition active:scale-[0.98]">
              <div class="flex items-center gap-2">
                <i data-lucide="zap" class="w-4 h-4 text-slate-300"></i>
                <span class="text-[12px] tracking-tight text-slate-200">Automate</span>
              </div>
              <div class="mt-2 text-[11px] text-slate-400">Create flow</div>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Center stage -->
    <main class="relative min-h-screen flex flex-col items-center justify-start md:justify-center">
      <!-- Onboarding greeting -->
      <div id="greet" class="fixed top-6 left-1/2 -translate-x-1/2 z-40 opacity-0 translate-y-[-8px] transition-all duration-700">
        <div class="rounded-2xl bg-white/10 backdrop-blur-xl border border-white/10 shadow-[0_12px_40px_rgba(0,0,0,0.45)] px-4 py-2.5 flex items-center gap-2.5">
          <div class="w-2.5 h-2.5 rounded-full bg-emerald-400 shadow-[0_0_20px_rgba(16,185,129,0.9)]"></div>
          <p class="text-sm tracking-tight">Hey Shekhar, ready to build today?</p>
        </div>
      </div>

      <!-- Decorative particles behind orb -->
      <div class="absolute inset-0 grid place-items-center -z-10">
        <div class="relative w-[28rem] h-[28rem] max-w-[85vw]">
          <div class="absolute left-8 top-10 w-1.5 h-1.5 rounded-full bg-white/30 blur-[1px] animate-pulse"></div>
          <div class="absolute right-12 top-24 w-1 h-1 rounded-full bg-white/20 blur-[1px] animate-pulse delay-200"></div>
          <div class="absolute left-1/3 bottom-16 w-1.5 h-1.5 rounded-full bg-white/25 blur-[1px] animate-pulse delay-500"></div>
          <div class="absolute right-20 bottom-12 w-1 h-1 rounded-full bg-white/20 blur-[1px] animate-pulse delay-700"></div>
        </div>
      </div>

      <!-- Glowing circular input -->
      <section class="w-full px-6 sm:px-10 lg:px-14 pt-28 md:pt-24">
        <div class="max-w-5xl mx-auto flex flex-col items-center">
          <h1 class="text-3xl sm:text-4xl md:text-5xl tracking-tight text-center text-slate-100" style="font-family: Poppins, Inter, ui-sans-serif;">Your space to think with an AI companion</h1>
          <p class="mt-3 text-slate-400 text-sm md:text-base text-center max-w-2xl">Ask, speak, or drop files. Content glides in; ideas flow out.</p>

          <div class="relative mt-10 md:mt-12">
            <!-- Listening rings -->
            <div id="listenRings" class="pointer-events-none absolute inset-0 grid place-items-center opacity-0 transition-opacity duration-500">
              <div class="relative">
                <span class="absolute inline-block rounded-full border border-cyan-400/30 w-[15rem] h-[15rem] animate-ping"></span>
                <span class="absolute inline-block rounded-full border border-cyan-400/20 w-[17rem] h-[17rem] animate-ping delay-200"></span>
                <span class="absolute inline-block rounded-full border border-cyan-400/10 w-[19rem] h-[19rem] animate-ping delay-500"></span>
              </div>
            </div>

            <!-- Orb -->
            <div id="orb" class="relative w-[15rem] h-[15rem] sm:w-[18rem] sm:h-[18rem] rounded-full bg-white/5 border border-white/10 backdrop-blur-2xl shadow-[inset_0_1px_0_rgba(255,255,255,0.12),0_40px_140px_-30px_rgba(0,0,0,0.7)] hover:shadow-[inset_0_1px_0_rgba(255,255,255,0.12),0_50px_180px_-30px_rgba(0,0,0,0.8)] transition-all duration-500">
              <!-- inner gradient glow -->
              <div class="absolute inset-0 rounded-full" style="background: radial-gradient(60% 60% at 50% 40%, rgba(56,189,248,0.18), transparent 60%), radial-gradient(40% 40% at 60% 60%, rgba(244,114,182,0.12), transparent 70%);"></div>

              <!-- Input field -->
              <div class="relative w-full h-full grid place-items-center px-6">
                <input id="prompt" type="text" placeholder="Ask or say something..."
                  class="w-full text-center bg-transparent placeholder:text-slate-400 text-slate-100 text-base sm:text-lg tracking-tight outline-none"
                  style="caret-color: rgb(103, 232, 249);" />
              </div>

              <!-- Controls -->
              <div class="absolute -bottom-3 left-1/2 -translate-x-1/2 flex items-center gap-2">
                <button id="voiceBtn" class="rounded-full bg-white/10 hover:bg-white/15 border border-white/10 backdrop-blur-xl w-10 h-10 grid place-items-center text-slate-100 transition-all duration-200 active:scale-95">
                  <i data-lucide="mic"></i>
                </button>
                <button id="submitBtn" class="rounded-full bg-gradient-to-br from-cyan-400/30 to-sky-500/30 hover:from-cyan-400/40 hover:to-sky-500/40 border border-white/10 backdrop-blur-xl w-10 h-10 grid place-items-center text-slate-100 transition-all duration-200 active:scale-95">
                  <i data-lucide="arrow-up-right"></i>
                </button>
              </div>

              <!-- Waveform (shown on listening) -->
              <div id="waveform" class="absolute bottom-6 left-1/2 -translate-x-1/2 flex items-end gap-1 opacity-0 transition-opacity duration-500">
                <span class="w-1.5 h-3 rounded-full bg-cyan-400/70 animate-bounce"></span>
                <span class="w-1.5 h-5 rounded-full bg-cyan-300/70 animate-bounce delay-150"></span>
                <span class="w-1.5 h-7 rounded-full bg-cyan-200/70 animate-bounce delay-300"></span>
                <span class="w-1.5 h-5 rounded-full bg-cyan-300/70 animate-bounce delay-150"></span>
                <span class="w-1.5 h-3 rounded-full bg-cyan-400/70 animate-bounce"></span>
              </div>
            </div>
          </div>

          <!-- Expanding dialogue panel -->
          <div id="dialogPanel" class="relative w-full max-w-3xl mt-10 opacity-0 -translate-y-4 scale-[0.98] pointer-events-none transition-all duration-700">
            <div class="rounded-3xl bg-white/5 backdrop-blur-xl border border-white/10 shadow-[0_30px_120px_-30px_rgba(0,0,0,0.8)] overflow-hidden">
              <div class="flex items-center justify-between px-5 py-4">
                <div class="flex items-center gap-2">
                  <div class="w-2.5 h-2.5 rounded-full bg-emerald-400/90 shadow-[0_0_16px_rgba(16,185,129,0.9)]"></div>
                  <h2 class="text-base tracking-tight text-slate-100">Companion</h2>
                </div>
                <div class="flex items-center gap-2">
                  <button class="rounded-xl px-3 py-1.5 text-xs bg-white/5 text-slate-300 border border-white/10 hover:bg-white/10 transition">New</button>
                  <button class="rounded-xl px-3 py-1.5 text-xs bg-white/5 text-slate-300 border border-white/10 hover:bg-white/10 transition">Save</button>
                </div>
              </div>
              <div class="h-px bg-white/10"></div>
              <div class="px-5 py-5 space-y-4 max-h-[45vh] overflow-y-auto">
                <!-- Conversation samples -->
                <div class="flex items-start gap-3">
                  <div class="w-8 h-8 grid place-items-center rounded-xl bg-gradient-to-br from-cyan-400/20 to-fuchsia-400/20 border border-white/10">
                    <i data-lucide="bot"></i>
                  </div>
                  <div class="flex-1">
                    <p class="text-sm text-slate-200 tracking-tight">Hey Shekhar, ready to build today? I can spin up a project, refactor your repo, or explore your knowledge space.</p>
                    <div class="mt-2 flex gap-2">
                      <button class="rounded-lg px-2.5 py-1 text-[11px] bg-white/5 text-slate-300 border border-white/10 hover:bg-white/10 transition">Start a sandbox</button>
                      <button class="rounded-lg px-2.5 py-1 text-[11px] bg-white/5 text-slate-300 border border-white/10 hover:bg-white/10 transition">Open my notes</button>
                    </div>
                  </div>
                </div>
                <div id="userDraft" class="hidden flex items-start gap-3">
                  <div class="w-8 h-8 grid place-items-center rounded-xl bg-white/10 border border-white/10">
                    <i data-lucide="user"></i>
                  </div>
                  <div class="flex-1">
                    <p id="draftText" class="text-sm text-slate-200 tracking-tight"></p>
                  </div>
                </div>
              </div>
              <div class="h-px bg-white/10"></div>
              <!-- Panel input -->
              <div class="px-4 py-3">
                <div class="flex items-center gap-2 rounded-2xl bg-white/5 border border-white/10 px-3 py-2">
                  <i data-lucide="sparkles" class="text-slate-300"></i>
                  <input id="panelInput" type="text" placeholder="Write here or press the mic to speak..." class="flex-1 bg-transparent outline-none text-sm placeholder:text-slate-400 text-slate-100 tracking-tight"/>
                  <button class="rounded-xl px-3 py-1.5 text-xs bg-white/5 text-slate-300 border border-white/10 hover:bg-white/10 transition active:scale-95">Send</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Helper tips -->
          <div class="mt-6 flex flex-wrap items-center justify-center gap-2 text-[11px] text-slate-400">
            <div class="rounded-full px-2.5 py-1 bg-white/5 border border-white/10">Shift + Space to talk</div>
            <div class="rounded-full px-2.5 py-1 bg-white/5 border border-white/10">/ to search modules</div>
            <div class="rounded-full px-2.5 py-1 bg-white/5 border border-white/10">Drag files anywhere</div>
          </div>
        </div>
      </section>
    </main>

    <script>
      // Icons
      document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons({ attrs: { "stroke-width": 1.5 } });
      });

      // Time-based gradient background
      function setDynamicBackground() {
        const h = new Date().getHours();
        // Dawn 5-8, Day 9-16, Dusk 17-20, Night 21-4
        let layers;
        if (h >= 5 && h <= 8) {
          layers = [
            'radial-gradient(1200px 800px at 20% 10%, rgba(244,114,182,0.25), transparent 60%)',
            'radial-gradient(900px 700px at 80% 90%, rgba(56,189,248,0.22), transparent 60%)',
            'linear-gradient(180deg, #0b1020 0%, #0a1224 100%)'
          ];
        } else if (h >= 9 && h <= 16) {
          layers = [
            'radial-gradient(1100px 700px at 15% 15%, rgba(59,130,246,0.25), transparent 60%)',
            'radial-gradient(900px 600px at 85% 75%, rgba(16,185,129,0.20), transparent 60%)',
            'linear-gradient(180deg, #0a1428 0%, #0a1a30 100%)'
          ];
        } else if (h >= 17 && h <= 20) {
          layers = [
            'radial-gradient(1200px 800px at 20% 10%, rgba(249,115,22,0.25), transparent 60%)',
            'radial-gradient(900px 600px at 80% 85%, rgba(168,85,247,0.20), transparent 60%)',
            'linear-gradient(180deg, #0a1224 0%, #0a1020 100%)'
          ];
        } else {
          layers = [
            'radial-gradient(1200px 800px at 20% 10%, rgba(14,165,233,0.20), transparent 60%)',
            'radial-gradient(900px 600px at 80% 80%, rgba(99,102,241,0.18), transparent 60%)',
            'linear-gradient(180deg, #070a14 0%, #060812 100%)'
          ];
        }
        const bg = document.getElementById('bg');
        bg.style.background = layers.join(', ');
      }
      setDynamicBackground();
      // Update periodically (every 15 minutes)
      setInterval(setDynamicBackground, 15 * 60 * 1000);

      // Cursor-following orbs (subtle)
      const orbA = document.getElementById('orbA');
      const orbB = document.getElementById('orbB');
      window.addEventListener('mousemove', (e) => {
        const x = e.clientX, y = e.clientY;
        // Parallax offsets
        orbA.style.transform = `translate3d(${x * 0.12}px, ${y * 0.10}px, 0)`;
        orbB.style.transform = `translate3d(${x * 0.06}px, ${y * 0.08}px, 0)`;
      });

      // Input orb interactions
      const promptInput = document.getElementById('prompt');
      const dialogPanel = document.getElementById('dialogPanel');
      const userDraft = document.getElementById('userDraft');
      const draftText = document.getElementById('draftText');
      const voiceBtn = document.getElementById('voiceBtn');
      const submitBtn = document.getElementById('submitBtn');
      const listenRings = document.getElementById('listenRings');
      const waveform = document.getElementById('waveform');

      function openPanel() {
        dialogPanel.classList.remove('pointer-events-none');
        dialogPanel.classList.add('opacity-100');
        dialogPanel.classList.add('translate-y-0');
        dialogPanel.classList.add('scale-100');
      }
      function closePanel() {
        dialogPanel.classList.add('pointer-events-none');
        dialogPanel.classList.remove('opacity-100');
        dialogPanel.classList.remove('translate-y-0');
        dialogPanel.classList.remove('scale-100');
      }

      let typingTimer;
      promptInput.addEventListener('input', (e) => {
        const val = e.target.value.trim();
        if (val.length > 0) {
          openPanel();
          userDraft.classList.remove('hidden');
          draftText.textContent = val;
        } else {
          userDraft.classList.add('hidden');
          draftText.textContent = '';
        }
        clearTimeout(typingTimer);
        typingTimer = setTimeout(() => {
          // simulate snapping draft into panel input
          document.getElementById('panelInput').value = val;
        }, 300);
      });
      promptInput.addEventListener('focus', openPanel);

      // Voice toggle
      let listening = false;
      function setListening(state) {
        listening = state;
        listenRings.style.opacity = state ? '1' : '0';
        waveform.style.opacity = state ? '1' : '0';
        voiceBtn.classList.toggle('ring-2', state);
        voiceBtn.classList.toggle('ring-cyan-400/50', state);
        voiceBtn.classList.toggle('bg-cyan-400/20', state);
      }
      voiceBtn.addEventListener('click', () => setListening(!listening));
      // Accessibility: Shift + Space to talk
      window.addEventListener('keydown', (e) => {
        if (e.shiftKey && e.code === 'Space') {
          e.preventDefault();
          setListening(!listening);
        }
      });

      // Submit
      submitBtn.addEventListener('click', () => {
        const text = promptInput.value.trim() || document.getElementById('panelInput').value.trim();
        if (!text) return;
        // In a real app, send text here
        promptInput.value = '';
        document.getElementById('panelInput').value = '';
        draftText.textContent = '';
        userDraft.classList.add('hidden');
        setListening(false);
      });

      // Onboarding greeting
      const greet = document.getElementById('greet');
      setTimeout(() => {
        greet.style.opacity = '1';
        greet.style.transform = 'translate(-50%, 0)';
      }, 400);
      setTimeout(() => {
        greet.style.opacity = '0';
        greet.style.transform = 'translate(-50%, -8px)';
      }, 3400);

      // Animate right stack "spring" on load
      document.querySelectorAll('[data-spring-card]').forEach((el, i) => {
        setTimeout(() => {
          el.style.opacity = '1';
          el.style.transform = 'translateX(0) scale(1)';
        }, 200 + i * 100);
      });

      // Module buttons smooth content hint
      document.querySelectorAll('[data-module]').forEach(btn => {
        btn.addEventListener('click', () => {
          openPanel();
        });
      });
    </script>
  </body>
</html>